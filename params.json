{"name":"xAOD Dumper","tagline":"Dump xAODs in a single bound!","body":"<!-- START doctoc generated TOC please keep comment here to allow auto update -->\r\n<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->\r\n**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*\r\n\r\n- [xAODDumper - A RootCore Package](#xaoddumper---a-rootcore-package)\r\n  - [Installing](#installing)\r\n  - [Functionality Included](#functionality-included)\r\n      - [Example Usage](#example-usage)\r\n    - [Understanding physical sizes of the containers](#understanding-physical-sizes-of-the-containers)\r\n    - [[dumpSG.py](scripts/dumpSG.py)](#dumpsgpyscriptsdumpsgpy)\r\n    - [Known Bugs](#known-bugs)\r\n- [Authors](#authors)\r\n  - [Acknowledgements](#acknowledgements)\r\n\r\n<!-- END doctoc generated TOC please keep comment here to allow auto update -->\r\n\r\n# xAODDumper - A RootCore Package\r\n\r\n## Installing\r\nThis will work on (most) xAODs in (most) a given AnalysisBase release. To install,\r\n\r\n```bash\r\ngit clone https://github.com/kratsg/xAODDumper.git\r\nrc find_packages\r\nrc compile\r\ndumpSG.py <input file> *kwargs\r\n```\r\n\r\nIt has been tested on Rel19 xAODs, Rel20 xAODs, DxAODs, mc14, and mc15 datasets. That is literally amazing!\r\n\r\n## Functionality Included\r\n - `dumpSG.py` is a python script (a ROOT macro of sorts) used to inspect information about a ROOT file. It should be self-documented via `dumpSG.py --help`.\r\n\r\n#### Example Usage\r\n\r\n* Quick start. Outputs all types and containers in the file in a pretty-print format. Output file is 'info.dump'.\r\n  ```\r\n  dumpSG.py input.root\r\n  ```\r\n\r\n* Change the output format to json for more detailed reporting.\r\n  ```\r\n  dumpSG.py input.root -f json\r\n  ```\r\n\r\n* Use `ROOT::TChain` to add multiple input xAOD ROOT files for analysis. Note that an implicit assumption is all the ROOT files correspond to the same AthAnalysisBase release and have the same set of branches and leaves. Unexpected behavior can occur if they do not.\r\n  ```\r\n  dumpSG.py mc14_13TeV.110401.PowhegPythia_P2012_ttbar_nonallhad.merge.DAOD_SUSY4.e2928_s1982_s2008_r5787_r5853_*/*.root\r\n  ```\r\n\r\n* Print out more verbose information about the attributes and properties for all containers\r\n  ```\r\n  dumpSG.py input.root --prop --attr\r\n  ```\r\n\r\n* Filter the xAOD types being used, such as allowing only `xAOD::JetContainer` or `xAOD::JetEtRoIInfo`\r\n  ```\r\n  dumpSG.py input.root --type=\"xAOD::Jet*\"\r\n  ```\r\n\r\n* Filter the xAOD containers being used, such as allowing only `AntiKt10` algorithms\r\n  ```\r\n  dumpSG.py input.root --container=\"*AntiKt10*\"\r\n  ```\r\n\r\n* Create a directory of reports across the containers\r\n  ```\r\n  dumpSG.py input.root --report\r\n  ```\r\n\r\n* and sometimes, you might be running on X11 or a similar agent so you want to run this in batch mode since we use `ROOT::TTree::Draw` to build our plots\r\n  ```\r\n  dumpSG.py input.root --report -b\r\n  ```\r\n\r\n* and sometimes you want to make multiple reports for multiple datasets so you configure the output directory\r\n  ```\r\n  dumpSG.py input.root -d input --report -b\r\n  ```\r\n\r\n* and sometimes you prefer to have individual PDFs instead merging all the information plotted for a given container\r\n  ```\r\n  dumpSG.py input.root -d report --report --merge-report -b\r\n  ```\r\n\r\n* if a job does not run correctly, we can increase the verbosity level with the python execution or root execution\r\n   ```\r\n   dumpSG.py input.root -v\r\n   dumpSG.py input.root -vv\r\n   dumpSG.py input.root -vvvvvv\r\n   ```\r\n\r\n   or\r\n\r\n   ```\r\n   dumpSG.py input.root --debug-root\r\n   ```\r\n\r\n### Understanding physical sizes of the containers\r\n\r\n```\r\ndumpSG.py input.root --format json --size --attr -b\r\n```\r\n\r\nwill produce two sets of pie charts. One pie chart represents the physical space on the disk and the other represents the amount of space in memory (RAM)\r\n\r\n<img src=\"https://github.com/kratsg/xAODDumper/raw/master/img/sizes_ondisk.png?raw=true\" alt=\"On-Disk Sizes\" width=\"325\" />\r\n<img src=\"https://github.com/kratsg/xAODDumper/raw/master/img/sizes_inmemory.png?raw=true\" alt=\"In-Memory Sizes\" width=\"325\" />\r\n\r\n### [dumpSG.py](scripts/dumpSG.py)\r\n```\r\nusage: dumpSG.py filename [filename] [options]\r\n\r\nProcess xAOD File and Dump Information.\r\n\r\npositional arguments:\r\n  input_filename        input root file(s) to read\r\n\r\noptional arguments:\r\n  -h, --help            show this help message and exit\r\n  --tree TREE_NAME      Specify the tree that contains the StoreGate\r\n                        structure. Default: CollectionTree\r\n  -o OUTPUT_FILENAME, --output OUTPUT_FILENAME\r\n                        Output file to store dumped information. Default:\r\n                        info.dump\r\n  -d OUTPUT_DIRECTORY, --output_directory OUTPUT_DIRECTORY\r\n                        Output directory to store the report generated.\r\n                        Default: report\r\n  -t CONTAINER_TYPE_REGEX, --type CONTAINER_TYPE_REGEX\r\n                        Regex specification for the xAOD container type. For\r\n                        example, --type=\"xAOD::Jet*\" will match\r\n                        `xAOD::JetContainer` while --type=\"xAOD::*Jet*\" will\r\n                        match `xAOD::TauJetContainer`. This uses Unix filename\r\n                        matching. Default: *\r\n  -c CONTAINER_NAME_REGEX, --container CONTAINER_NAME_REGEX\r\n                        Regex specification for the xAOD container name. For\r\n                        example, --container=\"AntiKt10LCTopo*\" will match\r\n                        `AntiKt10LCTopoJets`. This uses Unix filename\r\n                        matching. Default: *\r\n  -f {json,pickle,pretty}, --format {json,pickle,pretty}\r\n                        Specify the output format. Default: pretty\r\n  -v, --verbose         Enable verbose output of various levels. Use --debug-\r\n                        root to enable ROOT debugging. Default: no verbosity\r\n  --debug-root          Enable ROOT debugging/output. Default: disabled\r\n  -b, --batch           Enable batch mode for ROOT. Default: disabled\r\n  --has_aux             Enable to only include containers which have an\r\n                        auxillary container. By default, it includes all\r\n                        containers it can find. Default: disabled\r\n  --prop                Enable to print properties of container. By default,\r\n                        it only prints the xAOD::ContainerType and containers\r\n                        for that given type. This is like an increased\r\n                        verbosity option for container properties. Default:\r\n                        disabled\r\n  --attr                Enable to print attributes of container. By default,\r\n                        it only prints the xAOD::ContainerType and containers\r\n                        for that given type. This is like an increased\r\n                        verbosity option for container attributes. Default:\r\n                        disabled\r\n  --report              Enable to also create a directory containing plots and\r\n                        generate additional reporting information/statistics.\r\n                        By default, this is turned off as it can be\r\n                        potentially slow. The output directory containing the\r\n                        plots will be named `xAODDumper_Report`. Default:\r\n                        disabled\r\n  --merge-report        Enable to merge the generated report by container. By\r\n                        default, this is turned off. Default: disabled\r\n  --size                Enable to build a pie chart of the size distributions\r\n                        in memory and on-disk. By default, this is turned off.\r\n                        Default: disabled\r\n  --noEntries NO_ENTRIES\r\n                        If a plot generated by a report has no entries, color\r\n                        it with this ROOT color value. Default: kRed\r\n  --noRMS NO_RMS        If a plot generated by a report has RMS = 0.0 (mean !=\r\n                        0.0), color it with this ROOT color value. Default:\r\n                        kYellow\r\n  --noMean NO_MEAN      If a plot generated by a report has mean = 0.0, color\r\n                        it with this ROOT color value. Default: kOrange\r\n  --filterProps PROPERTY_NAME_REGEX\r\n                        (INACTIVE) Regex specification for xAOD property\r\n                        names. Only used if --prop enabled.\r\n  --filterAttrs ATTRIBUTE_NAME_REGEX\r\n                        (INACTIVE) Regex specification for xAOD attribute\r\n                        names. Only used if --attr enabled.\r\n  -i, --interactive     (INACTIVE) Flip on/off interactive mode allowing you\r\n                        to navigate through the container types and\r\n                        properties.\r\n```\r\n\r\n### Known Bugs\r\n- HLT Jets and other objects that are typed `AuxByteStreamContainer` are not easily introspected\r\n\r\n# Authors\r\n- [Giordon Stark](https://github.com/kratsg)\r\n\r\n## Acknowledgements\r\n- Thanks to [David Miller](http://fizisist.web.cern.ch/fizisist/Welcome.html) for the comments, critiques, and extensive testing. And basically being a bad-ass.\r\n","google":"UA-56943050-3","note":"Don't delete this file! It's used internally to help with page regeneration."}